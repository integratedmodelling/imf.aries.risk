private namespace aries.risk.flood.coastal;

observe earth:Region named mozambique
     over space(shape="EPSG:4326 MULTIPOLYGON (((37.5 -17.8182537, 37.2835755 -17.969098, 37.0449997 -18.3081447, 36.7131723 -18.6220125, 36.5992141 -18.7804706, 36.5732323 -18.8791429, 36.4680027 -18.9989328, 36.3545079 -19.0719701, 36.0513503 -19.1317273, 35.9077113 -19.2037485, 35.470545 -19.6756964, 35.253469 -19.8572915, 34.9708714 -20.0351221, 34.991736 -20.1671041, 34.9174227 -20.3987636, 35.039973 -20.4585305, 35.1291479 -20.5397317, 35.3330534 -20.8714383, 35.3325818 -21.3343892, 35.4544346 -21.3029735, 35.568597 -21.3306673, 35.6485451 -21.3876659, 35.7048728 -21.4998035, 35.7097011 -21.6691453, 35.6760552 -21.8215147, 35.6057644 -21.9358338, 35.7178215 -22.0143416, 35.7607747 -22.1126674, 35.7289431 -22.7492147, 35.7932064 -22.827559, 35.8199293 -22.9168184, 35.7987057 -23.0320226, 35.7104046 -23.1795725, 35.7007632 -23.3702247, 35.6407486 -23.5418084, 35.6486612 -23.620762, 35.7383506 -23.713153, 35.7714359 -23.8420128, 35.6712424 -24.2467014, 35.3644416 -24.6586374, 35.1760517 -24.8078148, 34.896511 -24.9340298, 33.4919163 -25.4352766, 33.1832111 -26.088667, 33.1045904 -26.9195574, 32.9022278 -26.8579667, 32.3311785 -26.8641324, 32.2203428 -26.8328164, 32.1547399 -26.8559001, 32.134622 -26.8402618, 32.1349279 -26.5268852, 32.0774184 -26.4056457, 32.1053495 -26.1616842, 32.0873004 -26.0085248, 32.0030495 -25.9969452, 31.93055 -25.84077, 32.0058871 -25.6447443, 31.9774868 -25.473754, 32.01528 -25.3825, 32.0337161 -25.1325394, 31.9853461 -24.3052245, 31.9081176 -24.1818141, 31.8805912 -23.9524891, 31.7677692 -23.8848619, 31.69739 -23.72189, 31.6899841 -23.6255295, 31.56102 -23.48196, 31.5636 -23.19823, 31.3073774 -22.4241096, 31.3764754 -22.3813244, 32.4056014 -21.3159278, 32.4790744 -21.3285748, 32.3958178 -21.2012426, 32.4144092 -21.1750065, 32.3627415 -21.1415755, 32.476877 -21.0044738, 32.51714 -20.90818, 32.4967826 -20.613349, 32.5666484 -20.5546906, 32.6681332 -20.5561752, 32.8719079 -20.2775599, 32.874116 -20.2342018, 32.8464207 -20.2218893, 32.8755439 -20.1872599, 32.8704071 -20.1060725, 32.939297 -20.0999971, 32.926604 -20.0416227, 33.0287656 -20.0351176, 33.0625558 -19.7762972, 32.9561519 -19.7198279, 32.9858104 -19.6902613, 32.9755075 -19.6510407, 32.8920976 -19.6841403, 32.8326271 -19.6710704, 32.8572394 -19.6185187, 32.8453702 -19.4836465, 32.7774932 -19.4598545, 32.77641 -19.36132, 32.84984 -19.29363, 32.8774 -19.09787, 32.83346 -19.01639, 32.7137449 -19.0250695, 32.6989442 -18.9387573, 32.7351105 -18.927924, 32.71191 -18.83363, 32.8183167 -18.7790537, 32.8818226 -18.7991696, 32.9376842 -18.767314, 32.9606217 -18.6868565, 32.8752109 -18.5201668, 33.0268764 -18.4706543, 33.0186689 -18.4216898, 33.0683501 -18.3486591, 33.0161535 -18.2985225, 33.0216574 -18.2285793, 32.9360144 -18.0326208, 32.9834199 -17.9179987, 32.9530002 -17.9131806, 32.9605625 -17.8149394, 33.0183212 -17.8027942, 33.0295972 -17.7482615, 33.007278 -17.731547, 33.0540968 -17.6047801, 32.9835564 -17.5594548, 32.9654322 -17.4799265, 33.0523929 -17.3422732, 32.9979894 -17.3063908, 32.96651 -17.13164, 32.8327419 -16.9230391, 32.9117379 -16.8972381, 32.9908342 -16.697412, 32.8915817 -16.7193662, 32.72486 -16.69163, 32.70234 -16.67677, 32.7127649 -16.5986334, 32.34418 -16.44917, 32.0371967 -16.4419996, 31.9111083 -16.4078084, 31.9007254 -16.3379885, 31.829384 -16.307542, 31.7349944 -16.2085069, 31.4261234 -16.1599115, 31.3445495 -16.0476526, 31.2778723 -16.0048236, 31.1404149 -15.9836402, 30.9879363 -16.0617302, 30.9187554 -16.0000345, 30.4240711 -16.0000079, 30.4251253 -15.6280413, 30.3664431 -15.5407175, 30.4015957 -15.4763588, 30.3609334 -15.3295229, 30.2619921 -15.2230446, 30.2506614 -15.1383742, 30.2128958 -15.0899001, 30.2337806 -15.0389095, 30.2167012 -14.9973709, 30.3842023 -14.9582221, 30.7996183 -14.7886033, 31.5025946 -14.6103112, 31.6827683 -14.5108867, 31.82005 -14.4825433, 31.9551206 -14.4131218, 32.4508167 -14.2842167, 33.2410831 -13.9987688, 33.3002721 -14.0318882, 33.3222295 -14.0844354, 33.2961307 -14.1424009, 33.3416294 -14.2165554, 33.3850756 -14.2197466, 33.4704094 -14.4012508, 33.6079001 -14.492111, 33.665131 -14.6157745, 33.7179978 -14.5778667, 33.7167825 -14.5011822, 33.8016082 -14.5520107, 33.9360167 -14.4705901, 34.0870492 -14.4896027, 34.0848825 -14.4586097, 34.392582 -14.3951198, 34.54364 -14.6054675, 34.5514505 -14.6479332, 34.5205512 -14.6872107, 34.5840024 -14.8113274, 34.5652919 -14.8989006, 34.6223738 -15.002667, 34.5714386 -15.0806584, 34.6032632 -15.265405, 34.5746968 -15.3261999, 34.5188837 -15.3537383, 34.5106863 -15.4140643, 34.4411241 -15.4232931, 34.4263949 -15.4933242, 34.457951 -15.608898, 34.3644616 -15.7425144, 34.2719904 -15.7967557, 34.2581212 -15.91772, 34.3553771 -15.9641508, 34.3883245 -16.026037, 34.430168 -16.0432503, 34.3976891 -16.1852956, 34.4309016 -16.2642988, 34.5704198 -16.3143582, 34.5938795 -16.4178618, 34.6520591 -16.4532235, 34.6810171 -16.4384709, 34.6822763 -16.502974, 34.7524346 -16.5127768, 34.7724734 -16.5859159, 34.84253 -16.6072331, 34.8582547 -16.675904, 34.9100697 -16.6937001, 34.9196599 -16.7473672, 34.984715 -16.748933, 34.9900923 -16.789006, 35.041798 -16.8288144, 35.1358275 -16.8181202, 35.1574568 -16.8397717, 35.171517 -16.937869, 35.0510489 -17.0104734, 35.0565399 -17.0493954, 35.1085222 -17.0872486, 35.0791818 -17.112529, 35.3080908 -17.1245434, 35.3051018 -16.982352, 35.2630703 -16.9400721, 35.3147041 -16.8310902, 35.2886274 -16.7103247, 35.1669765 -16.6195763, 35.1432474 -16.5607985, 35.2619191 -16.4749948, 35.2632267 -16.3986643, 35.3028725 -16.3457183, 35.2783302 -16.3258145, 35.2960682 -16.2321028, 35.4055462 -16.1249366, 35.4863286 -16.1204616, 35.5239597 -16.1680509, 35.5575019 -16.1216348, 35.7122909 -16.1012067, 35.8176385 -16.0276909, 35.853111 -15.4191381, 35.7900652 -15.1699635, 35.9185731 -14.8953503, 35.8721121 -14.8953629, 35.8720982 -14.6756206, 35.0895755 -13.6993081, 34.8668983 -13.4831105, 34.6071738 -13.48311, 34.5615271 -13.3481669, 34.5761163 -13.2322419, 34.5350232 -12.736354, 34.4557362 -12.570796, 34.4172599 -12.2654427, 34.3782306 -12.1716518, 34.4838765 -11.9723907, 34.5907557 -11.8560077, 34.6344259 -11.7392417, 34.6368966 -11.573566, 35.38744 -11.585084, 35.415355 -11.562091, 35.441946 -11.584215, 35.477888 -11.559626, 35.515192 -11.582192, 35.574603 -11.548838, 35.644761 -11.562921, 35.711639 -11.477472, 35.774572 -11.470657, 35.843352 -11.411228, 35.913531 -11.438248, 35.943818 -11.422892, 35.957946 -11.465587, 36.042192 -11.494471, 36.062893 -11.540585, 36.120043 -11.512823, 36.154096 -11.570353, 36.183413 -11.547985, 36.18323 -11.670874, 36.217465 -11.708525, 36.270217 -11.690431, 36.307039 -11.719746, 36.386768 -11.678515, 36.482846 -11.680225, 36.5180021 -11.6983405, 36.511461 -11.759261, 36.573255 -11.698523, 36.627242 -11.737779, 36.768322 -11.648194, 36.814589 -11.550491, 36.867529 -11.595382, 37.028323 -11.586129, 37.080046 -11.625113, 37.220281 -11.655315, 37.273811 -11.63436, 37.398726 -11.691263, 37.445275 -11.636313, 37.582392 -11.626115, 37.752804 -11.546822, 37.78664 -11.50645, 37.77725 -11.457268, 37.82749 -11.372271, 37.83028 -11.311206, 37.93059 -11.260281, 38.215691 -11.271239, 38.470308 -11.419405, 38.636391 -11.286101, 38.752408 -11.273193, 38.882995 -11.171765, 39.124245 -11.143433, 39.246038 -11.175432, 39.523081 -10.980957, 39.763603 -10.914043, 39.999104 -10.806914, 40.233184 -10.596228, 40.35206 -10.565456, 40.4927778 -10.4147222, 40.6471627 -10.3252149, 40.8392626 -10.6214682, 40.9345118 -11.0046029, 40.8399521 -11.8312947, 40.84042 -12.7687055, 40.8027442 -13.0078138, 40.7605985 -13.1039477, 40.7889779 -13.3492688, 40.774973 -13.450897, 40.806088 -13.5568884, 40.7742489 -13.6744632, 40.7918102 -13.8238304, 40.8969389 -14.0492044, 40.9886736 -14.1579748, 41.049928 -14.4190088, 41.0407941 -14.861116, 40.9802523 -15.1379002, 40.7500204 -15.5853556, 40.2257594 -16.4614949, 40.0929579 -16.6090364, 39.6553506 -16.9791762, 39.2163716 -17.2919335, 38.9447038 -17.4403927, 38.0823268 -17.5279594, 37.5 -17.8182537), (34.6758123 -12.0923924, 34.7301396 -12.1323766, 34.7823331 -12.0814501, 34.7909179 -12.0322302, 34.7147888 -12.0017384, 34.6758123 -12.0923924), (34.5859601 -11.983567, 34.582056 -12.065327, 34.6327592 -12.0811967, 34.6584267 -12.0008385, 34.5859601 -11.983567)))",
    			grid="500 m"),
    	 time(year=2020);	

event FloodEvent 
	is im:PeriodExpiration with im:High hydrology:FloodWaterVolume 
		within earth:Location;

quantity FloodVulnerabilityMetric
	describes risk:VulnerabilityMetric probability of im:Collapse of demography:SocialGroup
		caused by FloodEvent
    decreases with im:Height of infrastructure:Building;
	
quantity FloodExposureMetric
	describes risk:ExposureMetric probability of im:Collapse of demography:SocialGroup 
		caused by FloodEvent
    increases with count of demography:HumanIndividual;
	
quality FloodRiskMetric
	is risk:RiskMetric probability of im:Collapse of demography:SocialGroup
		caused by FloodEvent;

quality FloodHazardMetric
	is risk:HazardMetric hydrology:FloodWaterVolume during FloodEvent;

configuration FloodRisk is risk:Risk
	emerges from FloodEvent
	implies FloodVulnerabilityMetric for risk:VulnerabilityMetric,
			FloodExposureMetric for risk:ExposureMetric,
			FloodHazardMetric for risk:HazardMetric,
			FloodRiskMetric for risk:RiskMetric;	
	
model local:caterina.gilli:imf.aries.risk:aries-risk.inuncoast_rcp4p5_nosub_2030_rp0005_0
as hydrology:FloodWaterVolume named flood_depth;	

private model aries.risk.flood.coastal:FloodHazardMetric
	observing 
		hydrology:FloodWaterVolume named flood_depth
	lookup (flood_depth, ?) into 
	    flood_depth   |	hazard   
---------------------------------------------------------------------
		<= 0          |    0,           
		0 to 1        |    0.2,      
        1 to 2        |    0.4,       
		2 to 3        |    0.6,           
		3 to 4        |    0.8,      
        > 4           |    1 ; 

model aries.risk.flood.coastal:FloodExposureMetric     
	observing 
		im:Normalized count of demography:HumanIndividual named normalized_population
	set to [normalized_population];
